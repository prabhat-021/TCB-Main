<!-- testimonial-carousel.html -->
<div class="flex justify-center items-center min-h-screen">
  <div class="overflow-hidden w-full max-w-6xl px-4 relative">
    <div
      id="name1-carousel-track"
      class="flex transition-transform duration-500 ease-in-out items-stretch"
    >
      <!-- Slides will be injected here -->
    </div>
    <div class="flex justify-center mt-4 space-x-2" id="name1-dots"></div>
  </div>
</div>

<script>
  const name1Testimonials = [
    {
      name: "Sarah Johnson",
      role: "CFO, Global Enterprises",
      content:
        "Working with this team has been a game-changer for our financial strategy. Their personalized approach and attention to detail is unmatched in the industry.",
      img: "/public/assets/profile.png",
    },
    {
      name: "Alex Morgan",
      role: "CTO, TechVision",
      content:
        "The team's innovative approach to solving complex problems is refreshing. Their solutions have transformed our business operations completely.",
      img: "/public/assets/profile.png",
    },
    {
      name: "Michael Chen",
      role: "Founder, NextGen Startups",
      content:
        "I've worked with many consultants over the years, but none have delivered results like this team. Their insights were invaluable to our growth strategy.",
      img: "/public/assets/profile.png",
    },
  ];

  const name1Track = document.getElementById("name1-carousel-track");
  const name1Dots = document.getElementById("name1-dots");

  let name1CurrentIndex = 1;

  const name1ExtendedSlides = [
    ...name1Testimonials,
    ...name1Testimonials,
    ...name1Testimonials,
  ];

  function name1CreateCard(data, isCenter = false) {
    const card = document.createElement("div");
    card.className = "w-full md:w-[80%] lg:w-[33.3333%] px-2 flex-shrink-0";

    const mainCardClass = isCenter
      ? "bg-white rounded-2xl shadow-xl p-8 relative overflow-hidden"
      : "bg-white bg-opacity-20 backdrop-blur-md border border-gray-200 rounded-2xl shadow-xl p-8 relative overflow-hidden";

    card.innerHTML = `
        <div class="${mainCardClass}">
          ${
            isCenter
              ? `<div class="absolute top-0 left-0 w-full h-1 name1-gradient-bg"></div>`
              : ""
          }
          <div class="name1-quote-icon"><i class="fas fa-quote-right"></i></div>
          <div class="flex mb-4 text-yellow-400">
            <i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i>
            <i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i>
            <i class="fas fa-star-half-alt"></i>
          </div>
          <p class="text-gray-800 text-lg font-medium mb-6">"${
            data.content
          }"</p>
          <div class="flex items-center">
            <div class="bg-white p-1 rounded-full">
              <img src="${
                data.img
              }" class="w-12 h-12 rounded-full object-cover" />
            </div>
            <div class="ml-4">
              <h4 class="text-lg font-bold text-gray-900">${data.name}</h4>
              <p class="text-gray-600">${data.role}</p>
            </div>
          </div>
        </div>
      `;
    return card;
  }

  function name1RenderSlides() {
    name1ExtendedSlides.forEach((item, idx) => {
      const isCenter = idx === name1CurrentIndex;
      const slide = name1CreateCard(item, isCenter);
      name1Track.appendChild(slide);
    });
  }

  function name1UpdateSlides() {
    [...name1Track.children].forEach((child, idx) => {
      const inner = child.querySelector("div");
      inner.className =
        idx === name1CurrentIndex
          ? "bg-white rounded-2xl shadow-xl p-8 relative overflow-hidden"
          : "bg-white bg-opacity-20 backdrop-blur-md border border-gray-200 rounded-2xl shadow-xl p-8 relative overflow-hidden";

      if (idx === name1CurrentIndex) {
        if (!inner.querySelector(".name1-gradient-bg")) {
          const gradientBar = document.createElement("div");
          gradientBar.className =
            "absolute top-0 left-0 w-full h-1 name1-gradient-bg";
          inner.prepend(gradientBar);
        }
      } else {
        const grad = inner.querySelector(".name1-gradient-bg");
        if (grad) grad.remove();
      }
    });

    const slideWidth = name1Track.children[0].offsetWidth;
    const centerOffset = (name1Track.offsetWidth - slideWidth) / 2;
    const translateX = slideWidth * name1CurrentIndex - centerOffset;
    name1Track.style.transform = `translateX(-${translateX}px)`;

    [...name1Dots.children].forEach((dot, i) => {
      dot.className = `w-3 h-3 rounded-full ${
        i === name1CurrentIndex % name1Testimonials.length
          ? "bg-orange-500"
          : "bg-gray-300"
      }`;
    });
  }

  function name1RenderDots() {
    name1Testimonials.forEach((_, i) => {
      const dot = document.createElement("button");
      dot.className = `w-3 h-3 rounded-full ${
        i === 0 ? "bg-orange-500" : "bg-gray-300"
      }`;
      dot.addEventListener("click", () => {
        name1CurrentIndex = i + 1;
        name1UpdateSlides();
      });
      name1Dots.appendChild(dot);
    });
  }

  name1RenderSlides();
  name1RenderDots();

  window.addEventListener("load", () => {
    name1UpdateSlides();
  });

  window.addEventListener("resize", () => {
    name1UpdateSlides();
  });

  setInterval(() => {
    name1CurrentIndex++;
    if (name1CurrentIndex >= name1ExtendedSlides.length) {
      name1CurrentIndex = 1;
    }
    name1UpdateSlides();
  }, 5000);
</script>
