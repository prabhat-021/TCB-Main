<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Testimonial Carousel</title>
    <!-- Font Awesome -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .testimonial-gradient-bg {
        background: #cbba4f;
      }
      .testimonial-quote-icon {
        font-size: 1.75rem;
        position: absolute;
        top: 1rem;
        right: 1rem;
        opacity: 0.2;
      }
    </style>
  </head>
  <body class="bg-gray-100">
    <div class="flex justify-center items-center min-h-screen">
      <div class="overflow-hidden w-full max-w-6xl px-4 relative">
        <div
          id="testimonial-carousel-track"
          class="flex transition-transform duration-500 ease-in-out items-stretch"
        >
          <!-- Slides will be injected here -->
        </div>
        <div
          class="flex justify-center mt-4 space-x-2"
          id="testimonial-dots"
        ></div>
      </div>
    </div>

    <script>
      const testimonialData = [
        {
          name: "Sarah Johnson",
          role: "CFO, Global Enterprises",
          content:
            "Working with this team has been a game-changer for our financial strategy. Their personalized approach and attention to detail is unmatched in the industry.",
          img: "/public/assets/profile.png",
        },
        {
          name: "Alex Morgan",
          role: "CTO, TechVision",
          content:
            "The team's innovative approach to solving complex problems is refreshing. Their solutions have transformed our business operations completely.",
          img: "/public/assets/profile.png",
        },
        {
          name: "Michael Chen",
          role: "Founder, NextGen Startups",
          content:
            "I've worked with many consultants over the years, but none have delivered results like this team. Their insights were invaluable to our growth strategy.",
          img: "/public/assets/profile.png",
        },
      ];

      const testimonialTrack = document.getElementById(
        "testimonial-carousel-track"
      );
      const testimonialDots = document.getElementById("testimonial-dots");

      let testimonialCurrentIndex = 1;

      const testimonialExtendedSlides = [
        ...testimonialData,
        ...testimonialData,
        ...testimonialData,
      ];

      function createTestimonialCard(data, isCenter = false) {
        const card = document.createElement("div");
        card.className = "w-full md:w-[80%] lg:w-[33.3333%] px-2 flex-shrink-0";

        const mainCardClass = isCenter
          ? "bg-white rounded-2xl shadow-xl p-8 relative overflow-hidden"
          : "bg-white bg-opacity-20 backdrop-blur-md border border-gray-200 rounded-2xl shadow-xl p-8 relative overflow-hidden";

        card.innerHTML = `
          <div class="${mainCardClass}">
            ${
              isCenter
                ? `<div class="absolute top-0 left-0 w-full h-1 testimonial-gradient-bg"></div>`
                : ""
            }
            <div class="testimonial-quote-icon"><i class="fas fa-quote-right"></i></div>
            <div class="flex mb-4 text-yellow-400">
              <i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i>
              <i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i>
              <i class="fas fa-star-half-alt"></i>
            </div>
            <p class="text-gray-800 text-lg font-medium mb-6">"${
              data.content
            }"</p>
            <div class="flex items-center">
              <div class="bg-white p-1 rounded-full">
                <img src="${
                  data.img
                }" class="w-12 h-12 rounded-full object-cover" />
              </div>
              <div class="ml-4">
                <h4 class="text-lg font-bold text-gray-900">${data.name}</h4>
                <p class="text-gray-600">${data.role}</p>
              </div>
            </div>
          </div>
        `;
        return card;
      }

      function renderTestimonialSlides() {
        testimonialExtendedSlides.forEach((item, idx) => {
          const isCenter = idx === testimonialCurrentIndex;
          const slide = createTestimonialCard(item, isCenter);
          testimonialTrack.appendChild(slide);
        });
      }

      function updateTestimonialSlides() {
        [...testimonialTrack.children].forEach((child, idx) => {
          const inner = child.querySelector("div");
          inner.className =
            idx === testimonialCurrentIndex
              ? "bg-white rounded-2xl shadow-xl p-8 relative overflow-hidden"
              : "bg-white bg-opacity-20 backdrop-blur-md border border-gray-200 rounded-2xl shadow-xl p-8 relative overflow-hidden";

          if (idx === testimonialCurrentIndex) {
            if (!inner.querySelector(".testimonial-gradient-bg")) {
              const gradientBar = document.createElement("div");
              gradientBar.className =
                "absolute top-0 left-0 w-full h-1 testimonial-gradient-bg";
              inner.prepend(gradientBar);
            }
          } else {
            const grad = inner.querySelector(".testimonial-gradient-bg");
            if (grad) grad.remove();
          }
        });

        const slideWidth = testimonialTrack.children[0].offsetWidth;
        const centerOffset = (testimonialTrack.offsetWidth - slideWidth) / 2;
        const translateX = slideWidth * testimonialCurrentIndex - centerOffset;
        testimonialTrack.style.transform = `translateX(-${translateX}px)`;

        [...testimonialDots.children].forEach((dot, i) => {
          dot.className = `w-3 h-3 rounded-full ${
            i === testimonialCurrentIndex % testimonialData.length
              ? "bg-orange-500"
              : "bg-gray-300"
          }`;
        });
      }

      function renderTestimonialDots() {
        testimonialData.forEach((_, i) => {
          const dot = document.createElement("button");
          dot.className = `w-3 h-3 rounded-full ${
            i === 0 ? "bg-orange-500" : "bg-gray-300"
          }`;
          dot.addEventListener("click", () => {
            testimonialCurrentIndex = i + 1;
            updateTestimonialSlides();
          });
          testimonialDots.appendChild(dot);
        });
      }

      renderTestimonialSlides();
      renderTestimonialDots();

      window.addEventListener("load", () => {
        updateTestimonialSlides();
      });

      window.addEventListener("resize", () => {
        updateTestimonialSlides();
      });

      setInterval(() => {
        testimonialCurrentIndex++;
        if (testimonialCurrentIndex >= testimonialExtendedSlides.length) {
          testimonialCurrentIndex = 1;
        }
        updateTestimonialSlides();
      }, 5000);
    </script>
  </body>
</html>
